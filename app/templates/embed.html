<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="{{ url_for('static', filename='webgazer.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='main.js') }}" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <title>Medición de trayectoria</title>
</head>
<body>
    <div id="modal-ayuda" class="modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Instrucciones</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                <span aria-hidden="true"></span>
              </button>
            </div>
            <div class="modal-body">
                <img src="{{ url_for('static', filename='calibration.png') }}" width="100%" height="100%" alt="webgazer demo instructions"></img>
            </div>
          </div>
        </div>
      </div>
                

    <div height="100%" class="container">
        <!-- <h2 class="center-text">¡Datos enviados con éxito!</h2>
        <p class="center-text">Nombre: {{ nombre }}</p>
        <p class="center-text">Apellido: {{ apellido }}</p>
        <p class="center-text">Edad: {{ edad }}</p> -->

        <!-- Aquí puedes insertar el iframe con el embed de Figma -->
        <iframe id="figma-prototype" width="100%" height="650" src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Fproto%2FAp91mv3kmSM1xBvNzLzTw3%2FTest-B%3Ftype%3Ddesign%26node-id%3D8-1867%26t%3Deu6uWK3Bm709Thkk-1%26scaling%3Dmin-zoom%26page-id%3D0%253A1%26starting-point-node-id%3D8%253A1867%26mode%3Ddesign" allowfullscreen></iframe>
    </div>

    <script>
      let puntos = [];

      // Inicia WebGazer.js y establece el GazeListener
      webgazer.setGazeListener(function(data, elapsedTime) {
          if (data == null) {
              return;
          }
          var xprediction = data.x; // estas coordenadas x son relativas al viewport
          var yprediction = data.y; // estas coordenadas y son relativas al viewport
          console.log(xprediction, " ", yprediction); // el tiempo transcurrido se basa en el tiempo desde que se llamó a begin
          puntos.push({ x: xprediction,
                        y: yprediction
                      })
        }).begin();
    </script>

    <!-- Calibration points -->
    <div class="calibrationDiv">
        <input type="button" class="Calibration" id="Pt1"></input>
        <input type="button" class="Calibration" id="Pt2"></input>
        <input type="button" class="Calibration" id="Pt3"></input>
        <input type="button" class="Calibration" id="Pt4"></input>
        <input type="button" class="Calibration" id="Pt5"></input>
        <input type="button" class="Calibration" id="Pt6"></input>
        <input type="button" class="Calibration" id="Pt7"></input>
        <input type="button" class="Calibration" id="Pt8"></input>
        <input type="button" class="Calibration" id="Pt9"></input>
    </div>
</body>
</html>
